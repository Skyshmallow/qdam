# üß™ Simulation Mode (Test Mode)

## –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–†–µ–∂–∏–º —Å–∏–º—É–ª—è—Ü–∏–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º **—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∏–≥—Ä–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏** –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–µ–∞–ª—å–Ω–æ–π —Ö–æ–¥—å–±—ã –∏ GPS-—Ç—Ä–µ–∫–∏–Ω–≥–∞.

---

## –ö–ª—é—á–µ–≤—ã–µ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### ‚úÖ –ß—Ç–æ –†–∞–±–æ—Ç–∞–µ—Ç –¢–∞–∫ –ñ–µ, –ö–∞–∫ –í –†–µ–∞–ª—å–Ω–æ–º –†–µ–∂–∏–º–µ:
- –°–æ–∑–¥–∞–Ω–∏–µ —É–∑–ª–æ–≤ (–±–∞–∑)
- –°–æ–∑–¥–∞–Ω–∏–µ —Ü–µ–ø–æ—á–µ–∫
- –†–∞—Å—á–µ—Ç —Å—Ñ–µ—Ä –≤–ª–∏—è–Ω–∏—è
- –†–∞—Å—á–µ—Ç —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ (convex hull)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª–∞ —Å—Ñ–µ—Ä –≤–ª–∏—è–Ω–∏—è
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–º–∫–æ–≤, —Å—Ñ–µ—Ä, —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏

### ‚ùå –ß—Ç–æ –û—Ç–∫–ª—é—á–µ–Ω–æ –í –†–µ–∂–∏–º–µ –°–∏–º—É–ª—è—Ü–∏–∏:
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `localStorage`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–Ω–µ–≤–Ω–æ–≥–æ –ª–∏–º–∏—Ç–∞ (2 —Ü–µ–ø–æ—á–∫–∏/–¥–µ–Ω—å)
- GPS-—Ç—Ä–µ–∫–∏–Ω–≥ (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–ª–∏–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–µ)
- –ê–Ω—Ç–∏-—á–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏

### ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –û—Ç–ª–∏—á–∏—è:
1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ñ–µ—Ä –≤–ª–∏—è–Ω–∏—è:** –í —Ä–µ–∂–∏–º–µ —Å–∏–º—É–ª—è—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ **–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —É–∑–ª—ã** (—Å–æ–∑–¥–∞–Ω–Ω—ã–µ –≤ —ç—Ç–æ–π –∂–µ —Å–µ—Å—Å–∏–∏). –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —É–∑–ª—ã –∏–∑ `localStorage` –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è.

2. **–î–∞–Ω–Ω—ã–µ –∏—Å—á–µ–∑–∞—é—Ç:** –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

## –ö–∞–∫ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. –í–∫–ª—é—á–∏—Ç—å –†–µ–∂–∏–º –°–∏–º—É–ª—è—Ü–∏–∏

```tsx
// –í App.tsx
const { isSimulationMode, toggleSimulationMode } = useSimulationMode();

// –í UI
<button onClick={toggleSimulationMode}>
  {isSimulationMode ? 'üß™ TEST MODE (ON)' : 'Normal Mode'}
</button>
```

### 2. –°–æ–∑–¥–∞—Ç—å –¢–µ—Å—Ç–æ–≤—É—é –¶–µ–ø–æ—á–∫—É

**–®–∞–≥–∏:**
1. –ù–∞–∂–∞—Ç—å **Find Me** (–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ)
2. –í–∫–ª—é—á–∏—Ç—å **TEST MODE** (toggle)
3. –ù–∞–∂–∞—Ç—å **Start** / **Simulate**
4. –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ (–≤—ã–±—Ä–∞—Ç—å —Ç–æ—á–∫—É A)
5. –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ (–≤—ã–±—Ä–∞—Ç—å —Ç–æ—á–∫—É B)
6. –ù–∞–∂–∞—Ç—å **Play** (–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–º—É–ª—è—Ü–∏—é –¥–≤–∏–∂–µ–Ω–∏—è)
7. –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
8. ‚Üí –ó–∞–º–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è, –Ω–æ **–Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è**

### 3. –û—á–∏—Å—Ç–∏—Ç—å –¢–µ—Å—Ç–æ–≤—ã–µ –î–∞–Ω–Ω—ã–µ

```tsx
const { clearTestData } = useSimulationMode();

<button onClick={() => clearTestData(setNodes, setChains)}>
  üóëÔ∏è Clear Test Data
</button>
```

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –§–ª–∞–≥ `isTemporary`

–ö–∞–∂–¥—ã–π —É–∑–µ–ª –∏ —Ü–µ–ø–æ—á–∫–∞ –∏–º–µ—é—Ç –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–ª–∞–≥:

```typescript
interface Node {
  id: string;
  coordinates: [number, number];
  status: 'pending' | 'established';
  isTemporary?: boolean; // ‚Üê true = —Å–æ–∑–¥–∞–Ω–æ –≤ —Ä–µ–∂–∏–º–µ —Å–∏–º—É–ª—è—Ü–∏–∏
}
```

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ü—Ä–∏ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏

```typescript
useEffect(() => {
  if (isSimulationMode) return; // –ù–µ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ —Ç–µ—Å—Ç–µ
  
  const permanentNodes = nodes.filter(n => !n.isTemporary);
  localStorage.setItem('qdam_nodes', JSON.stringify(permanentNodes));
}, [nodes, isSimulationMode]);
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ü—Ä–∞–≤–∏–ª

```typescript
function canStartChain(coords, nodes, chains, isSimulationMode) {
  // –í —Ç–µ—Å—Ç–µ: –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —É–∑–ª—ã
  const nodesToCheck = isSimulationMode 
    ? nodes.filter(n => n.isTemporary)
    : nodes.filter(n => !n.isTemporary);
  
  // ...–æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
}
```

---

## –°—Ü–µ–Ω–∞—Ä–∏–∏ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –°—Ñ–µ—Ä –í–ª–∏—è–Ω–∏—è

```
1. –í–∫–ª—é—á–∏—Ç—å TEST MODE
2. –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é —Ü–µ–ø–æ—á–∫—É (A ‚Üí B)
3. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞—Ç—å –≤—Ç–æ—Ä—É—é —Ü–µ–ø–æ—á–∫—É –í–ù–ï —Å—Ñ–µ—Ä—ã
4. ‚Üí –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞: "–ù—É–∂–Ω–æ –±—ã—Ç—å –≤–Ω—É—Ç—Ä–∏ –°—Ñ–µ—Ä—ã –í–ª–∏—è–Ω–∏—è!"
5. –ö–ª–∏–∫–Ω—É—Ç—å –í–ù–£–¢–†–ò —Å—Ñ–µ—Ä—ã
6. ‚Üí –î–æ–ª–∂–Ω–æ —Ä–∞–∑—Ä–µ—à–∏—Ç—å
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏

```
1. –í–∫–ª—é—á–∏—Ç—å TEST MODE
2. –°–æ–∑–¥–∞—Ç—å 2 —Ü–µ–ø–æ—á–∫–∏ (4 —É–∑–ª–∞)
3. ‚Üí –¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è –ø–æ—è–≤–ª—è–µ—Ç—Å—è (—Å–∏–Ω–∏–π –ø–æ–ª–∏–≥–æ–Ω)
4. Refresh —Å—Ç—Ä–∞–Ω–∏—Ü—ã
5. ‚Üí –¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è –∏—Å—á–µ–∑–∞–µ—Ç (–¥–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã)
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```
‚ùå –ù–ï –†–ê–ó–†–ï–®–ï–ù–û:
- –†–µ–∞–ª—å–Ω—ã–π –ø–æ—Ö–æ–¥ ‚Üí –≤–∫–ª—é—á–∏—Ç—å TEST MODE ‚Üí –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
- TEST MODE ‚Üí –Ω–∞—á–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π –ø–æ—Ö–æ–¥ ‚Üí –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞

–û–±–∞ —Ä–µ–∂–∏–º–∞ –≤–∑–∞–∏–º–Ω–æ –±–ª–æ–∫–∏—Ä—É—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞.
```

---

## –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏

–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ —Ä–µ–∂–∏–º–µ —Å–∏–º—É–ª—è—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `[SIMULATION]`:

```
[SIMULATION] üß™ Entering TEST MODE
[SIMULATION] Checking sphere rules (temporary nodes only)
[SIMULATION] üóëÔ∏è Clearing all temporary test data
[SIMULATION] ‚úÖ Exiting TEST MODE
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –î–∞–Ω–Ω—ã–µ

```typescript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
console.log('Permanent nodes:', nodes.filter(n => !n.isTemporary));
console.log('Temporary nodes:', nodes.filter(n => n.isTemporary));
```

---

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ–∂–∏–º–æ–≤:** –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π –ø–æ—Ö–æ–¥ –∏ —Å–∏–º—É–ª—è—Ü–∏—é –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

2. **–î–∞–Ω–Ω—ã–µ –Ω–µ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã:** –ü–æ—Å–ª–µ refresh –≤—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª—è—é—Ç—Å—è.

3. **–¢–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:** –í production —ç—Ç–æ—Ç —Ä–µ–∂–∏–º –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–∫—Ä—ã—Ç –∑–∞ feature flag.

---

## –ë—É–¥—É—â–∏–µ –£–ª—É—á—à–µ–Ω–∏—è

- [ ] –≠–∫—Å–ø–æ—Ä—Ç —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ JSON
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏–∑ —Ñ–∞–π–ª–∞
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (E2E tests)
- [ ] Feature flag –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è –≤ production